{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import'./Login.css';import{useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{useEffect(()=>{},[]);const[formData,setFormData]=useState({email:'',password:''});const[errors,setErrors]=useState({});const[isSubmitting,setIsSubmitting]=useState(false);const[isLogin,setIsLogin]=useState(true);const[message,setMessage]=useState('');const navigate=useNavigate();const handleChange=e=>{const{name,value}=e.target;setFormData({...formData,[name]:value});};const validate=()=>{let tempErrors={};tempErrors.email=formData.email?'':'Email is required';if(formData.email&&!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email)){tempErrors.email='Email is not valid';}tempErrors.password=formData.password?'':'Password is required';if(!isLogin&&formData.password.length<6){tempErrors.password='Password must be at least 6 characters';}setErrors(tempErrors);return Object.values(tempErrors).every(x=>x==='');};const handleSubmit=async e=>{e.preventDefault();if(validate()){setIsSubmitting(true);setMessage('');try{const endpoint=isLogin?'/login':'/register';const response=await fetch(`http://localhost:8080${endpoint}`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:formData.email,password:formData.password})});const data=await response.json();if(!response.ok){throw new Error(data.error||'Something went wrong');}setMessage(data.message);if(isLogin&&data.success){navigate('/page1',{state:{user:data.user}});}if(!isLogin&&!data.error){setIsLogin(true);}}catch(error){setMessage(error.message);}finally{setIsSubmitting(false);}}};return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:isLogin?'Login':'Register'}),message&&/*#__PURE__*/_jsx(\"div\",{className:`message ${message.includes('success')?'success':'error'}`,children:message}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:formData.email,onChange:handleChange,className:errors.email?'error':''}),errors.email&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:formData.password,onChange:handleChange,className:errors.password?'error':''}),errors.password&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.password})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isSubmitting,className:\"login-button\",children:isSubmitting?'Processing...':isLogin?'Login':'Register'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"toggle-mode\",children:isLogin?/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account?\",' ',/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setIsLogin(false),children:\"Register\"})]}):/*#__PURE__*/_jsxs(\"p\",{children:[\"Already have an account?\",' ',/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setIsLogin(true),children:\"Login\"})]})})]})});};export default Login;","map":{"version":3,"names":["React","useState","useNavigate","useEffect","jsx","_jsx","jsxs","_jsxs","Login","formData","setFormData","email","password","errors","setErrors","isSubmitting","setIsSubmitting","isLogin","setIsLogin","message","setMessage","navigate","handleChange","e","name","value","target","validate","tempErrors","test","length","Object","values","every","x","handleSubmit","preventDefault","endpoint","response","fetch","method","headers","body","JSON","stringify","data","json","ok","Error","error","success","state","user","className","children","includes","onSubmit","htmlFor","type","id","onChange","disabled","onClick"],"sources":["/Users/roy/Desktop/Zealthy/Git/Onboarding/src/Components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './Login.css';\nimport { useEffect } from 'react';\n\nconst Login = () => {\n  useEffect(() => {\n    \n  }, []);\n  const [formData, setFormData] = useState({\n    email: '',\n    password: ''\n  });\n  const [errors, setErrors] = useState({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isLogin, setIsLogin] = useState(true);\n  const [message, setMessage] = useState('');\n  const navigate = useNavigate();\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n  };\n\n  const validate = () => {\n    let tempErrors = {};\n    tempErrors.email = formData.email ? '' : 'Email is required';\n    if (formData.email && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email)) {\n      tempErrors.email = 'Email is not valid';\n    }\n    tempErrors.password = formData.password ? '' : 'Password is required';\n    if (!isLogin && formData.password.length < 6) {\n      tempErrors.password = 'Password must be at least 6 characters';\n    }\n    setErrors(tempErrors);\n    return Object.values(tempErrors).every(x => x === '');\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (validate()) {\n      setIsSubmitting(true);\n      setMessage('');\n      \n      try {\n        const endpoint = isLogin ? '/login' : '/register';\n        const response = await fetch(`http://localhost:8080${endpoint}`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            email: formData.email,\n            password: formData.password\n          }),\n        });\n        \n        const data = await response.json();\n        \n        if (!response.ok) {\n          throw new Error(data.error || 'Something went wrong');\n        }\n        \n        setMessage(data.message);\n        \n        \n        if (isLogin && data.success) {\n          navigate('/page1', { state: { user: data.user } });\n        }\n        \n        \n        if (!isLogin && !data.error) {\n          setIsLogin(true);\n        }\n      } catch (error) {\n        setMessage(error.message);\n      } finally {\n        setIsSubmitting(false);\n      }\n    }\n  };\n\n  return (\n    <div className=\"login-container\">\n      <div className=\"login-form\">\n        <h2>{isLogin ? 'Login' : 'Register'}</h2>\n        {message && (\n          <div className={`message ${message.includes('success') ? 'success' : 'error'}`}>\n            {message}\n          </div>\n        )}\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <label htmlFor=\"email\">Email</label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              name=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              className={errors.email ? 'error' : ''}\n            />\n            {errors.email && <span className=\"error-message\">{errors.email}</span>}\n          </div>\n          \n          <div className=\"form-group\">\n            <label htmlFor=\"password\">Password</label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              name=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              className={errors.password ? 'error' : ''}\n            />\n            {errors.password && <span className=\"error-message\">{errors.password}</span>}\n          </div>\n          \n          <button \n            type=\"submit\" \n            disabled={isSubmitting}\n            className=\"login-button\"\n          >\n            {isSubmitting ? 'Processing...' : (isLogin ? 'Login' : 'Register')}\n          </button>\n        </form>\n        \n        <div className=\"toggle-mode\">\n          {isLogin ? (\n            <p>\n              Don't have an account?{' '}\n              <button type=\"button\" onClick={() => setIsLogin(false)}>Register</button>\n            </p>\n          ) : (\n            <p>\n              Already have an account?{' '}\n              <button type=\"button\" onClick={() => setIsLogin(true)}>Login</button>\n            </p>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}