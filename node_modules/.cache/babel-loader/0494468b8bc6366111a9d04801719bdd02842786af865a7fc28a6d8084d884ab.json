{"ast":null,"code":"import React,{useState}from'react';import{useLocation,useNavigate,Link}from'react-router-dom';import AboutMe from'./AboutMe';import Address from'./Address';import BirthDate from'./BirthDate';import{getAssignedComponents}from'../helpers/componentUtils';import'./Page2.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Page2=()=>{const location=useLocation();const navigate=useNavigate();const{user,formData}=location.state||{};const assignedComponents=getAssignedComponents('page2');const[aboutMeText,setAboutMeText]=useState((formData===null||formData===void 0?void 0:formData.aboutMeText)||'');const[address,setAddress]=useState((formData===null||formData===void 0?void 0:formData.address)||{street:'',city:'',state:'',zip:''});const[selectedYear,setSelectedYear]=useState((formData===null||formData===void 0?void 0:formData.selectedYear)||'');const[selectedMonth,setSelectedMonth]=useState((formData===null||formData===void 0?void 0:formData.selectedMonth)||'');const[selectedDay,setSelectedDay]=useState((formData===null||formData===void 0?void 0:formData.selectedDay)||'');const[message,setMessage]=useState('');const handleLogout=()=>{navigate('/');};const handleSubmit=async()=>{try{if(!aboutMeText||!address.street||!selectedYear){setMessage('Please fill in all required fields');return;}const response=await fetch('http://localhost:8080/api/save-profile',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id:user.id,about_me:aboutMeText,street:address.street,city:address.city,state:address.state,zip_code:address.zip,birth_year:selectedYear,birth_month:selectedMonth,birth_day:selectedDay})});const result=await response.json();if(!response.ok)throw new Error(result.error||'Failed to save profile');navigate('/');}catch(error){setMessage(error.message);console.error('Submission error:',error);}};const renderComponent=name=>{switch(name){case'AboutMe':return/*#__PURE__*/_jsx(AboutMe,{value:aboutMeText,onChange:value=>setAboutMeText(value)});case'Address':return/*#__PURE__*/_jsx(Address,{value:address,onChange:updatedAddress=>setAddress(updatedAddress)});case'BirthDate':return/*#__PURE__*/_jsx(BirthDate,{year:selectedYear,month:selectedMonth,day:selectedDay,onYearChange:year=>setSelectedYear(year),onMonthChange:month=>setSelectedMonth(month),onDayChange:day=>setSelectedDay(day)});default:return null;}};return/*#__PURE__*/_jsxs(\"div\",{className:\"page2-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page2-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome to Page 2\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-button\",children:\"Logout\"})]}),user&&/*#__PURE__*/_jsx(\"div\",{className:\"user-info\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Logged in as: \",/*#__PURE__*/_jsx(\"strong\",{children:user.email})]})}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message}),/*#__PURE__*/_jsxs(\"div\",{className:\"page2-content\",children:[assignedComponents.map(component=>/*#__PURE__*/_jsx(\"div\",{className:\"component-wrapper\",children:renderComponent(component)},component)),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(Link,{to:\"/page1\",state:{user},className:\"nav-button\",children:\"Back to Page 1\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"submit-button\",children:\"Submit\"})]}),(user===null||user===void 0?void 0:user.email)==='admin@example.com'&&/*#__PURE__*/_jsx(\"div\",{className:\"admin-link\",children:/*#__PURE__*/_jsx(Link,{to:\"/admin\",className:\"admin-button\",children:\"Admin Panel\"})})]})]});};export default Page2;","map":{"version":3,"names":["React","useState","useLocation","useNavigate","Link","AboutMe","Address","BirthDate","getAssignedComponents","jsx","_jsx","jsxs","_jsxs","Page2","location","navigate","user","formData","state","assignedComponents","aboutMeText","setAboutMeText","address","setAddress","street","city","zip","selectedYear","setSelectedYear","selectedMonth","setSelectedMonth","selectedDay","setSelectedDay","message","setMessage","handleLogout","handleSubmit","response","fetch","method","headers","body","JSON","stringify","user_id","id","about_me","zip_code","birth_year","birth_month","birth_day","result","json","ok","Error","error","console","renderComponent","name","value","onChange","updatedAddress","year","month","day","onYearChange","onMonthChange","onDayChange","className","children","onClick","email","map","component","to"],"sources":["/Users/roy/Desktop/Zealthy/Git/Onboarding/src/Components/Page2.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useLocation, useNavigate, Link } from 'react-router-dom';\nimport AboutMe from './AboutMe';\nimport Address from './Address';\nimport BirthDate from './BirthDate';\nimport { getAssignedComponents } from '../helpers/componentUtils';\nimport './Page2.css';\n\nconst Page2 = () => {\n    const location = useLocation();\n    const navigate = useNavigate();\n    const { user, formData } = location.state || {};\n    const assignedComponents = getAssignedComponents('page2');\n  \n    \n    const [aboutMeText, setAboutMeText] = useState(formData?.aboutMeText || '');\n    const [address, setAddress] = useState(formData?.address || {\n      street: '',\n      city: '',\n      state: '',\n      zip: ''\n    });\n    const [selectedYear, setSelectedYear] = useState(formData?.selectedYear || '');\n    const [selectedMonth, setSelectedMonth] = useState(formData?.selectedMonth || '');\n    const [selectedDay, setSelectedDay] = useState(formData?.selectedDay || '');\n    const [message, setMessage] = useState('');\n\n  const handleLogout = () => {\n    navigate('/');\n  };\n\n  const handleSubmit = async () => {\n    try {\n   \n      if (!aboutMeText || !address.street || !selectedYear) {\n        setMessage('Please fill in all required fields');\n        return;\n      }\n  \n      const response = await fetch('http://localhost:8080/api/save-profile', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          user_id: user.id,\n          about_me: aboutMeText,\n          street: address.street,\n          city: address.city,\n          state: address.state,\n          zip_code: address.zip,\n          birth_year: selectedYear,\n          birth_month: selectedMonth,\n          birth_day: selectedDay\n        })\n      });\n  \n      const result = await response.json();\n      if (!response.ok) throw new Error(result.error || 'Failed to save profile');\n      \n      navigate('/');\n    } catch (error) {\n      setMessage(error.message);\n      console.error('Submission error:', error);\n    }\n  };\n\n  const renderComponent = (name) => {\n    switch(name) {\n      case 'AboutMe': \n        return <AboutMe value={aboutMeText} onChange={(value) => setAboutMeText(value)} />;\n      case 'Address': \n        return <Address \n          value={address} \n          onChange={(updatedAddress) => setAddress(updatedAddress)} \n        />;\n      case 'BirthDate': \n        return <BirthDate \n          year={selectedYear} \n          month={selectedMonth} \n          day={selectedDay}\n          onYearChange={(year) => setSelectedYear(year)}\n          onMonthChange={(month) => setSelectedMonth(month)}\n          onDayChange={(day) => setSelectedDay(day)}\n        />;\n      default: return null;\n    }\n  };\n\n  return (\n    <div className=\"page2-container\">\n      \n      <div className=\"page2-header\">\n        <h1>Welcome to Page 2</h1>\n        <button \n          onClick={handleLogout} \n          className=\"logout-button\"\n        >\n          Logout\n        </button>\n      </div>\n\n      {user && (\n        <div className=\"user-info\">\n          <p>Logged in as: <strong>{user.email}</strong></p>\n        </div>\n      )}\n\n      {message && <div className=\"message\">{message}</div>}\n\n      <div className=\"page2-content\">\n        {assignedComponents.map(component => (\n          <div key={component} className=\"component-wrapper\">\n            {renderComponent(component)}\n          </div>\n        ))}\n\n       \n        <div className=\"form-actions\">\n          <Link \n            to=\"/page1\" \n            state={{ user }} \n            className=\"nav-button\"\n          >\n            Back to Page 1\n          </Link>\n          <button \n            onClick={handleSubmit} \n            className=\"submit-button\"\n          >\n            Submit\n          </button>\n        </div>\n\n        \n        {user?.email === 'admin@example.com' && (\n          <div className=\"admin-link\">\n            <Link to=\"/admin\" className=\"admin-button\">\n              Admin Panel\n            </Link>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Page2;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}